<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        <meta name = "viewport" content="width=device-width, initial-scale=1.0">
        <title>Ben Austin > d3.js</title>
        <link rel = "stylesheet"
        href = "https://cdnjs.cloudfare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
        <link rel = "stylesheet"
        href = "https://cdnjs.cloudfare.com/ajas/libs/font-awesome/5.11.2/css/all.css"
        integrity = "sha256-46qynGAkLSFpVbEBog43gvNhfr0j+BmwXdxFgVK/Kvc=" crossorigin="anonymous" />
        <script src="https://kit.fontawesome.com/1d82a883f3.js" crossorigin="anonymous"></script>
        <script src="https://d3js.org/d3.v6.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,900|Source+Sans+Pro:300,900&display=swap" rel="stylesheet">
        <link rel = "stylesheet" href = "css/style.css">
    </head>
    <body>
        <header>
            <div class= "logo">
                <li class= "logo-list">
                    <a class = "logo" href = "index.html">
                        <i class="fas fa-bold"></i>
                    </a>
                </li>
            </div>
            <button class = "nav-toggle" aria-label="toggle navigation">
                <span class = "hamburger"></span>
            </button>
            <nav class = "nav">
                <ul class="nav__list">
                    <li class = "nav__item"><a href = "index.html" class = "nav__link">Home</a></li>
                    <li class = "nav__item"><a href = "index.html#services" class = "nav__link">My Services</a></li>
                    <li class = "nav__item"><a href = "index.html#about" class = "nav__link">About me</a></li>
                    <li class = "nav__item"><a href = "index.html#work" class = "nav__link">My Work</a></li>
                    <li class = "nav__item"><a href = "d3_page.html" class = "nav__link">d3.js</a></li>
                </ul>
            </nav>
        </header>

        <section class="intro" id="home">
            <h1 class = "section__title section__title--intro">
                Learning <strong>d3.js</strong>
            </h1>
            <p class = "section__subtitle section__subtitle--intro"></p>
            <img src="img/d3.png" class = "intro__image">
        </section>


        <!-- d3 content -->

        <section class = "d3-post">
            <div class = "d3-post d3-post--subtitle">
                <p class = "d3-post d3-post--subtitle--text">
                    Importing d3.js to work in your file, and setup
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                    d3.js is a custom JavaScript Library which has the power to link data with Scalable Vector Graphics (SVGs)
                    and HTML to create stunning visualisations. <br/> In order to get using d3.js in HTML files, we need to
                    give access to the d3.js library in a script tag. Within the index.html file, we need to include the following
                    link as a source for a script tag:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    &lt;script src = "https://d3js.org/d3.v6.js"&gt; &lt;/script&gt;
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                This will allow the use of d3 within the webpage. <br/> The next step is to create the space for the visualisation.
                In order to do this, we will use a div, with an id. This will allow us to target this div within our d3.js code later on. To create this div, 
                include the following as an attribute of your div tag:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    &lt;div id = "my_dataviz"&gt;&lt;/div&gt;
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                The meta tag for UTF-8 is also recommended, so it is best to include this tag in the head too: 
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    &lt;meta charset = "UTF-8"&gt;
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                The final thing we need to get things working is a final script tag. This will link to our JavaScript file, where we will write
                our JavaScript code to form the visualisation using d3.js. <br/> We can embed the script tag inside the div, so that the location
                of our visualisation looks like the following:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    &lt;div id="my_dataviz" class="my_dataviz"&gt; <br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;script src="js/d3.js"&gt;&lt;/script&gt; <br/>
                    &lt;/div&gt;
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                We are now ready to start using d3.js <br/> <br/>
            </p>
            <div class = "d3-post d3-post--subtitle">
                <p class = "d3-post d3-post--subtitle--text">
                    A basic d3.js visualisation
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                In this section we are going to step through making our first basic visualisation. The bar chart:
            </p>
            <div id="my_dataviz" class="my_dataviz">
                <script src="js/d3.js"></script>
            </div>
            <p class = "d3-post d3-post--content--text">
                There are a few steps to get something like what is shown above up and running, the first is to setup some variables
                in our JavaScript file. In order to dial in the parameters for the size of the visualisation, we need 3 variables at the 
                top of our .js file; margin, width and height. Margin is a list of 4 numbers corresponding to pixel sized margins on each edge of 
                the visualisation. The width and heights are also numbers, but minusing off the size of the margins. This allows the number 
                at the start of the variable to be the maximum size of the svg that we will generate later on. <br/> <br/> These variables can differ
                but may resemble the following code chunk:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    const margin = {top: 30, right: 30, bottom: 20, left: 60}, <br/>
                    &nbsp; &nbsp; &nbsp; &nbsp;width = 460 - margin.left - margin.right,<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp;height = 400 - margin.top - margin.bottom;
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                Now that we have the size of our visualisation, we can append an svg object within the div that we created earlier.
                To do this we will define a variable called "svg", which will select all div's with the id that we used, append some attributes
                that will define the size of the svg, and then append a group tag, which acts similarly to grouping objects in MicroSoft Office. The result looks like this:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    const svg = d3.select("#my_dataviz") <br/>
                    &nbsp; &nbsp; &nbsp; &nbsp;.append("svg")<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.attr("width", width + margin.left + margin.right)<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.attr("height", height + margin.top + margin.bottom)<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp;.append("g")<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.attr("transform", `translate(${margin.left},${margin.top})`);
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                Let's step through the code in this section <br/> <br/>
                The first line: "const svg = d3.select("#my_dataviz")" creates a variable called svg, which asks d3 to final all html tags with the id of "my_dataviz". 
                The only one in our code with this id is the one we created earlier, so that is where the visualisation will be displayed. You could have multiple though
                if you wanted to display the same visualisation in multiple sections of a webpage. In this case we would need to use d3.selectAll("#my_dataviz"). <br/> <br/>
                The second line appends an svg object within our div element. The third and fourth lines then set the size of this svg object using the variables that we defined above.
                Notice that we add the margin widths to the size of the svg, this will allow us to only use the height and width when creating the visualisation and thus ensure everything 
                that we plot is within the svg space. A 'g' tag is then appened too. This allows all further objects that are drawn to be grouped together, so that any changes to where we
                display the graph, i.e. if we need to translate it, will apply to all elements.
            </p>
            <p class = "d3-post d3-post--content--text">
                Next we need to parse some data to draw our objects with, we can parse a simple csv by doing the following:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master <br/> /Example_dataset/7_OneCatOneNum_header.csv").then( function(data) {
                </p>
            </div>
            <p class = "d3-post d3-post--content--text">
                We chain ".then(function(data) {" to tell d3 what to do with the data we just gave it, the next sections will all be inside this function.
            </p>
            <p class = "d3-post d3-post--content--text">
                The next step is to deal with the x axis. We need to tell d3 how to space our inputs for the graph. In the case of a bar chart we need to use "scaleBand()"
                to generate the bands on the x axis for our data. We do this using the following:
            </p>
            <div class = "d3-post d3-post--code">
                <p class = "d3-post d3-post--code--text">
                    const x = d3.scaleBand() <br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; .range([ 0, width ]) <br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; .domain(data.map(d => d.Country))<br/>
                    &nbsp; &nbsp; &nbsp; &nbsp; .padding(0.2);
                </p>
            </div>
            
            
        </section>

        <footer class = "footer">
            <a href="mailto:benaustin27@gmail.com" class = "footer__link">benaustin27@gmail.com</a>
            <ul class = "social-list">
                <li class = "social-list__item">
                    <a class = "social-list__link" href = "facebook.com">
                        <i class="fab fa-facebook"></i>
                    </a>
                </li>
                <li class = "social-list__item">
                    <a class = "social-list__link" href = "instagram.com">
                        <i class="fab fa-instagram"></i>
                    </a>
                </li>
                <li class = "social-list__item">
                    <a class = "social-list__link" href = "github.com">
                        <i class="fab fa-github"></i>
                    </a>
                </li>
            </ul>
        </footer>

        <script src="js/index.js"></script>
        </div>
    </body>
</html>